#!/bin/sh -x
# Copyright (C) 2010 Freescale Semiconductor, Inc. All Rights Reserved.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along
# with this program; if not, write to the Free Software Foundation, Inc.,
# 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.

# Function:     setup
#
# Description:  - Check if required commands exits
#               - Export global variables
#               - Check if required config files exits
#               - Create temporary files and directories
#
# Return        - zero on success
#               - non zero on failure. return value from commands ($RC)
setup()
{
#TODO Total test case
export TST_TOTAL=1

export TCID="setup"
export TST_COUNT=0
RC=0

trap "cleanup" 0

#TODO add setup scripts

return $RC
}

# Function:     cleanup
#
# Description   - remove temporary files and directories.
#
# Return        - zero on success
#               - non zero on failure. return value from commands ($RC)
cleanup()
{
RC=0

#TODO add cleanup code here
return $RC
}

check_emmc_card()
{
    if [ `uname -r` > "3.5" ]; then
		cards=$(ls /sys/devices/*/*/*/mmc_host/*/*/boot_info)
	else
		cards=$(ls /sys/devices/platform/*/mmc_host/*/*/boot_info)
	fi
	for i in $cards
	do
		emmc_card=$emmc_card" "$(dirname $i)
	done
}
RC=0
emmc_card=""
check_emmc_card
setup

#main
for i in $emmc_card;
do
	if [ -e $i ];then
 		cat ${i}/boot_info
	else
 		echo "no $i card avaiable"
	fi
done
return $RC
