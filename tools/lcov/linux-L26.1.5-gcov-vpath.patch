diff -Naur linux-2.6.7-mxc1.5-gcov-2.6.5/scripts/Makefile.build linux-2.6.7-mxc1.5-gcov.new/scripts/Makefile.build
--- linux-2.6.7-mxc1.5-gcov-2.6.5/scripts/Makefile.build	2004-11-04 11:13:09.000000000 +0100
+++ linux-2.6.7-mxc1.5-gcov.new/scripts/Makefile.build	2004-11-04 12:29:29.000000000 +0100
@@ -127,7 +127,7 @@
 
 ifndef CONFIG_MODVERSIONS
 cmd_cc_o_c = $(CC) $(c_flags) -c -o $@ \
-	     $(if $(filter-out /%,$<),$(srctree)/$<,$<)
+	     $(if $(filter-out /%,$<),$(shell cd `dirname $<` && pwd)/$(shell basename $<),$<)
 
 else
 # When module versioning is enabled the following steps are executed:
@@ -143,7 +143,7 @@
 #   the actual value of the checksum generated by genksyms
 
 cmd_cc_o_c = $(CC) $(c_flags) -c -o $(@D)/.tmp_$(@F) \
-	     $(if $(filter-out /%,$<),$(srctree)/$<,$<)
+	     $(if $(filter-out /%,$<),$(shell cd `dirname $<` && pwd)/$(shell basename $<),$<)
 cmd_modversions =							\
 	if ! $(OBJDUMP) -h $(@D)/.tmp_$(@F) | grep -q __ksymtab; then	\
 		mv $(@D)/.tmp_$(@F) $@;					\
